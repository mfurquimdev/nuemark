async function G(u){dispatchEvent(new Event("before:route"));const K=R(await Q(u));document.title=v("title",K)?.textContent;const b=v("main"),j=v("main",K);if(b&&j)b.replaceWith(j);else v("body").innerHTML=v("body2",K).innerHTML,v("body").classList=v("body2",K).classList;E(z("style"),z("style",K)).forEach((I)=>v("head").appendChild(I));const A=E(z("link"),z("link",K));U(A,()=>{scrollTo(0,0),dispatchEvent(new Event("route"))})}function J(u,K){u.addEventListener("click",(b)=>{const j=b.target.closest("[href]"),x=j?.getAttribute("href"),A=j?.getAttribute("target");if(b.defaultPrevented||b.metaKey||b.ctrlKey||b.shiftKey||b.altKey||!x||x[0]=="#"||x.includes("//")||x.startsWith("mailto:")||A=="_blank")return;if(x!=location.pathname)K(x);b.preventDefault()})}function O(u,K="selected"){const b=v(`[href="${u}"]`);z("."+K).forEach((j)=>j.classList.remove(K)),b?.classList.add(K)}var v=function(u,K=document){return K.querySelector(u)},z=function(u,K=document){return[...K.querySelectorAll(u)]},D=function(u,K){return K.find((b)=>b.getAttribute("href")==u.getAttribute("href"))},E=function(u,K){return u.forEach((b,j)=>b.disabled=!D(b,K)),K.filter((b)=>!D(b,u))};async function Q(u){if(!B[u]){const K=await fetch(u);B[u]=await K.text()}return B[u]}var R=function(u){u=u.replace(/<(\/?)body/g,"<$1body2");const K=document.createElement("template");return K.innerHTML=u.trim(),K.content},U=function(u,K){let b=0;!u[0]?K():u.forEach((j,x)=>{V(j.href,()=>{if(++b==u.length)K()})})},V=function(u,K){const b=document.createElement("link");b.rel="stylesheet",b.href=u,v("head").appendChild(b),b.onload=K},F=typeof window=="object";addEventListener("popstate",(u)=>{const{path:K,is_spa:b}=u.state||{};if(K)G(K)});F&&history.pushState({path:location.pathname},0);F&&J(document,(u)=>{G(u),history.pushState({path:u},0,u),O(u)});var B={};export{O as setSelected,J as onclick,G as loadPage};
